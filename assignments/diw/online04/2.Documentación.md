# Diseño de Interfaces Web

## Tarea Online 4

**Alumno**: Jaime Ranchal Beato
**Curso:** 2DAWS

Este documento explica el tratamiento que se le ha dado a los elementos multimedia (imágenes, sonidos y clips de video) incluidos en la página web adjunta. Cada sección contiene información sobre las fuentes utilizadas y el proceso de _optimización_ aplicado.

Para esta tarea hemos simulado un portafolio diseñado para un cantante o grupo de música. Las secciones está simplemente esbozadas, con los contenidos mínimos para apreciar su funcionalidad. Hemos hecho un uso intensivo de [BootStrap](https://getbootstrap.com) (v.4), con algunas modificaciones propias en el css para hacer la página responsiva.

Todo el material propio utilizado está libre de derechos de autor, o posee una licencia _Creative Commons_ que permite su uso. El material externo proviene de dos fuentes:

- [Youtube](https://www.youtube.com): clips de video con audio en la sección _Vídeos_
- [Soundcloud](https://soundcloud.com): clips de audio en la sección _Discografía_

![sonidos.soundcloud1](/home/jaime/Proyectos/sandbox/daw/assignments/css.ol04/capturas/sonidos.soundcloud1.png)

## Imágenes

### Criterios de selección y uso

Puesto que el objetivo de la web es servir de portafolio a un artista, el elemento visual debía tener un papel destacado. Optamos por una imagen de cabecera que ocupase todo el _viewport_, en blanco y negro, destacando el título y la barra de navegación. Esta cabecera se mantiene igual en todas las secciones.

El resto de imágenes se ubican en la galería, en forma de _grid_ o rejilla de elementos, utilizando `display:flex` mediante las utilidades de BootStrap.

### Fuentes

Todas las imágenes utilizadas han sido descargadas de [Unsplash.com](https://unsplash.com), un banco de imágenes de autor que sólo pide a cambio de su uso la mención específica al autor de las mismas.

![](/home/jaime/Proyectos/sandbox/daw/assignments/css.ol04/capturas/unsplash.png)

### Optimización con *Gimp*

En todas las imágenes hemos utilizado el _plugin_ "Save for the web", instalándolo previamente mediante _apt_ con

```bash
apt install gimp-plugin-registry
```

#### Portada

Para garantizar la responsividad y evitar tiempos de carga innecesarios, creamos 4 versiones de la imagen de portada en diferentes tamaños:

- pantallas pequeñas (menos de 55opx): _portada-sm.jpg_, 557x600px
- medianas (entre 550px y 950px): _portada-md.jpg_, 950x1024px
- grandes (entre 950 y 1400px): _portada-lg.jpg_, 1280x912px
- muy grandes (más de 1400px): _portada-xl.jpg_, 1600x1140px

Además del cambio de tamaño, decidimos cambiar la **proporción** para pantallas medianas y pequeñas, por corresponderse normalmente con dispositivos portátiles que suelen visualizarse con una orientación **vertical**.

##### Paso 1. Recortar la imagen

![gimp01-abrir-img](/home/jaime/Proyectos/sandbox/daw/assignments/css.ol04/capturas/gimp01-abrir-img.png)

La imagen original tiene mucho espacio vación, que nos interesa recortar. Queremos dejar el motivo (el hombre, en este caso) destacado en el centro.

![gimp02](/home/jaime/Proyectos/sandbox/daw/assignments/css.ol04/capturas/gimp02.png)

Usando la herramienta selección (tecla `R`) creamos una selección rectangular a nuestro gusto. En caso de saber exactamente la relación de aspecto deseada, se puede fijar, garantizando una selección más exacta.

![gimp03](/home/jaime/Proyectos/sandbox/daw/assignments/css.ol04/capturas/gimp03.png)

Una vez seleccionada la parte de la imagen que queremos, desde el menú seguimos `Imagen > Recortar a la selección`



![gimp06](/home/jaime/Proyectos/sandbox/daw/assignments/css.ol04/capturas/gimp06.png)

Queda cambiar el tamaño a alguna de las opciones que mencionamos más arriba. Pinchamos en `Imagen > Escalar la imagen` y seleccionamos los valores deseados. Es importante dejar marcado el símbolo de la cadena, que **mantiene la proporción**, para no deformar la imagen innecesariamente.

![gimp07](/home/jaime/Proyectos/sandbox/daw/assignments/css.ol04/capturas/gimp07.png)



Hecho esto, ya sólo nos queda guardar, para lo cual usamos la opción `Archivo > Guardar para la web` que aparece tras instalar el plugin mencionado antes.


![gimp04](/home/jaime/Proyectos/sandbox/daw/assignments/css.ol04/capturas/gimp04.png)

Se abre una ventana de vista previa, donde podemos ajustar algunas opciones. Lo más interesante es el **tamaño del archivo**, que, como vemos, es bastante bajo, incluso tratándose de la opción de tamaño más grande:

![gimp08](/home/jaime/Proyectos/sandbox/daw/assignments/css.ol04/capturas/gimp08.png)

Repetimos el proceso con el resto de resoluciones deseadas, y listo.

![gimp09](/home/jaime/Proyectos/sandbox/daw/assignments/css.ol04/capturas/gimp09.png)

![gimp10](/home/jaime/Proyectos/sandbox/daw/assignments/css.ol04/capturas/gimp10.png)

#### Resto de imágenes

El proceso seguido es análogo al descrito en el caso de la portada. Este era el tamaño de las imágenes originales:

![imagenes.tamaño-original](/home/jaime/Proyectos/sandbox/daw/assignments/css.ol04/capturas/imagenes.tamaño-original.png)

Una vez aplicadas las operaciones con Gimp:

![imagenes.tamaño-reducido](/home/jaime/Proyectos/sandbox/daw/assignments/css.ol04/capturas/imagenes.tamaño-reducido.png)

> NOTA sobre los nombres de archivo:
> Sólo hemos cambiado el nombre de la imagen de portada (Photo by Toa Heftiba)

## Sonido

### Fuentes

Para los sonidos _propios_ hemos utilizado la biblioteca de sonidos libros de derechos proporcionada por Google a través de la plataforma Youtube Studio.

![sonidos.youtube-studio01](/home/jaime/Proyectos/sandbox/daw/assignments/css.ol04/capturas/sonidos.youtube-studio01.png)

Como ya mencionamos antes, los sonidos externos provienen de la plataforma SoundCloud, que proporciona un modo sencillo de insertar sus clips de audio en una web mediante la etiqueta `<iframe>`:

![sonidos.soundcloud2](/home/jaime/Proyectos/sandbox/daw/assignments/css.ol04/capturas/sonidos.soundcloud2.png)

### Optimización con *ffmpeg*

Para optimizar el sonido para la web, hemos utilizado una herramienta que ya tiene sus años, [ffmpeg](https://ffmpeg.org/documentation.html). La primera razón, práctica, ha sido el propio sistema operativo utilizado, linux, donde no es posible instalar la solución de [AVS](https://www.avs4you.com/es/avs-free-audio-converter.aspx). En segundo lugar, _ffmpeg_ permite gestionar las opciones de codificación con muchísima transparencia, y un nivel de detalle tremendo.

Se trata de una aplicación sin interfaz gráfica. Para aplicarla a todos los archivos descargados hemos hecho un simple bucle _for_ en consola. A continuación añadimos una captura del comando ejecutado y comentamos paso a paso las opciones:

![audio.conversion-ffmpeg1](/home/jaime/Proyectos/sandbox/daw/assignments/css.ol04/capturas/audio.conversion-ffmpeg1.png)

El comando ejecutado ha sido:

```bash
for FILE in *.mp3; do 
	nuevonombre="$FILE.comprimido.mp3";
	ffmpeg -i $FILE -ar 44100 -ac 2 -ab 128k -f mp3 $nuevonombre;
done
```

- `for FILE in *.mp3; do`: para cada archivo _mp3_ ejecuta las siguientes acciones

- `nuevonombre="$FILE.comprimido.mp3";`: almacena en una variable el nombre del archivo más una cadena extra que diga _comprimido_

- `ffmpeg -i $FILE -ar 44100 -ac 2 -ab 128k -f mp3 $nuevonombre;`: llamada a _ffmpeg_ con los siguientes parámetros:

  - `-i $FILE`: archivo de entrada;
  - `-ar 44100`: _frecuencia de muestreo_, ajustada a 44,1 khz
  - `-ac 2`: _canales_, dos, para sonido estéreo
  - `-ab 128k`: _bitrate_, calidad estándar para música.
  - `-f mp3`: aunque ffmpeg detecta de forma inteligente el *formato de salida* por la extensión del último parámetro, lo indicamos explícitamente.
  - `$nuevonombre`: nombre del archivo de salida, que como indicamos en la variable anterior sería "nombrearchivo.comprimido.mp3"

  A continuación captura del resultado, donde puede verse cómo se ha reducido el tamaño de los archivos:

![audio.conversion-ffmpeg2](/home/jaime/Proyectos/sandbox/daw/assignments/css.ol04/capturas/audio.conversion-ffmpeg2.png)



## Vídeo

### Fuentes

Para descargar los vídeos hemos utilizado una biblioteca de clips de video llamada [Videvo](https://www.videvo.net/):

![video.fuente-videvo](/home/jaime/Proyectos/sandbox/daw/assignments/css.ol04/capturas/video.fuente-videvo.png)



### Optimización con *Openshot*

Para editar los videos y prepararlos para calidad web hemos elegido [Openshot](https://www.openshot.org/), por la variedad de sus opciones y estar disponible en Linux. A continuación describimos el proceso seguido paso a paso.

En primer lugar desde el menú `Archivo > añadir archivos` abrimos todos los archivos que necesitemos editar. Estos se añaden a la ventana de la izquierda (en la imagen, sólo aparece el primero que elegimos de prueba).

Para poder editarlo, hay que añadirlo a la _línea de tiempo_, abajo del todo. Todas las operaciones de edición, transformación etc. se realizan sobre el fragmento de tiempo seleccionado en esta sección.

Un simple click derecho sobre el archivo en cuestión, y elegimos `Añadir a la línea de tiempo` para realizarlo:

![openshot.addVideo01](/home/jaime/Proyectos/sandbox/daw/assignments/css.ol04/capturas/openshot.addVideo01.png)

Como sólo queremos **exportar** el mismo archivo con unos ajustes diferentes, inmediatamente después de haberlo añadido, nos vamos a `Archivo > Exportar vídeo`:

![openshot.export01](/home/jaime/Proyectos/sandbox/daw/assignments/css.ol04/capturas/openshot.export01.png)



Esto abre una ventana de diálogo con varias opciones. Nos interesa asignarle un nuevo nombre y fijarnos en las dos **pestañas** que aparecen: _simple_ y _avanzado_:

- _Simple_: escoge el destino del video (Flickr, Vimeo, Youtube...) y ajusta automáticamente las opciones de salida, incluido el formato final.
- _Avanzado_: elige manualmente las opciones de codificación de audio y video, formato de salida etc.

![openshot.export02](/home/jaime/Proyectos/sandbox/daw/assignments/css.ol04/capturas/openshot.export02.png)

Para un mayor control, escogemos la opción avanzada:

##### Paso 1: video

Elegimos un tipo de contenedor (`.mp4`), un códec de video y la tasa de bits. Únicamente cambiamos el formato de video a mp4, dejamos lo demás tal cual; el tema de los códecs es complejo, pero sabemos que `libx264` tiene un buen nivel de compresión.

![openshot.export03](/home/jaime/Proyectos/sandbox/daw/assignments/css.ol04/capturas/openshot.export03.png)

El siguiente grupo de opciones corresponde al sonido. Aquí lo importante es la tasa de muestreo y la tasa de bits (44,1khz, 128k). El formato `.ac3` tiene una mejor compresión, así que escogemos ese:

![openshot.export04](/home/jaime/Proyectos/sandbox/daw/assignments/css.ol04/capturas/openshot.export04.png)

Finalmente escogemos _qué_ se va a exportar (video y audio) y pinchamos en `Exportar vídeo`:

![openshot.export05](/home/jaime/Proyectos/sandbox/daw/assignments/css.ol04/capturas/openshot.export05.png)

Una barra de progreso aparecerá mostrándonos el avance. Dependiendo del tamaño original puede tardar un poco:

![openshot.export06](/home/jaime/Proyectos/sandbox/daw/assignments/css.ol04/capturas/openshot.export06.png)



La reducción de tamaño, como podemos apreciar en esta comparativa, es considerable:

![videos.tamaño-final](/home/jaime/Proyectos/sandbox/daw/assignments/css.ol04/capturas/videos.tamaño-final.png)