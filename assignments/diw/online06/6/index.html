<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html lang="es" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width initial-scale=1">
        <title>Tarea online 6</title>
        <link rel="stylesheet" href="../estilo.css" type="text/css" media="all">
        <style type="text/css" media="screen">
            #ej6 {
                position: absolute;
                top: 1em;
                left: 1em;
            }
            .cuadro {
                position: relative;
                width: 200px;
                height: 200px;
            }
            .botones {
                margin: 1em 1em;
            }
        </style>
        <!-- librerias -->
        <script src="../jquery-3.5.1.min.js"></script>
        <script charset="utf-8">
            "use strict";

            /**
             * NOTA:
             * Este es una modificación del anterior, con la dificultad
             * de que la animación debía ser infinita para que tuviera sentido
             * pararla.
             * Para resolverlo, he optado por hacer recursiva la animación
             */

            $(document).ready(function(){
                // asigno las funciones animar y parar a los botones respectivos
                // usando sus ids para seleccionarlos
                $("#animar").on('click', animar);    
                $("#parar").on('click', parar);    
            })

            /**
             * Aumenta progresivamente el tamaño del elemento
             * y lo desplaza a la derecha de forma indefinida
             */
            let animar = () => {
                // Selecciono el elemento con clase cuadro y aplico una animación
                $('.cuadro').animate(
                    {
                        left: "+=50",   // en cada paso aumenta en 50px la posición del elemento con respecto al borde izquierdo
                        width: "+=50",  // en cada paso aumenta en 50px el ancho del elemento
                        height: "+=50", // en cada paso aumenta en 50px el ancho del elemento
                    }, 
                    5000, // la animación durará 5 segundos
                    () => animar()); // para que sea infinita, vuelvo a llamar a la función animar
            }

            /**
             * Detiene la animación del elemento seleccionado
             */
            let parar = () => {
                // Utilizao la función stop para detener la animación del cuadro
                // usando su clase para seleciconarla
                $('.cuadro').stop(true);
            }
        </script>
    </head>
    <body>

        <div id="ej6">
            <h2>Ejercicio 6</h2>
            <div class="botones">
                <button id="animar">Animar</button>
                <button id="parar">Parar</button>
            </div>
            <div class="cuadro pink"></div>
        </div>

    </body>
</html>
